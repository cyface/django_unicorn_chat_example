{% load static %}
<div unicorn:poll-4000="get_messages">
    <div style="border:solid; max-width: 647px; padding: 15px">
        {% for message in messages %}
            <p style="margin-top:0; margin-bottom:0"><strong>{{ message.from_user.first_name }}</strong>&nbsp;
                <span style="color:lightgray; font-size:x-small;">
                    {{ message.created_at|date:'fA' }}</span></p>
            <p style="margin-top:0; margin-bottom: 5px">{{ message.content }}</p>
        {% endfor %}
    </div>
    <br>
    <br>
    {% if request.user %}
        <div>
            <input type="text"
                   name="message"
                   id="message"
                   placeholder="Message main channel"
                   unicorn:dirty.attr="readonly"
                   unicorn:change="add($event.target.value.trim())"
                   maxlength="100"
                   minlength="1"
                   size="94"

            />
        <img alt="Send Message Icon" title="Send Message"
             src="{% static 'img/paper-airplane.svg' %}" height="15px" width="15px"
             style="vertical-align: middle;"
             onClick="Unicorn.call('chat.add', document.getElementById('message').value.trim()); document.getElementById('message').value = ''')"
        >
        </div>
    {% endif %}
</div>